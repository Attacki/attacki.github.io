window.WebGLDebugUtils=function(){var O=function(e){window.console&&window.console.log&&window.console.log(e)},p={enable:{0:!0},disable:{0:!0},getParameter:{0:!0},drawArrays:{0:!0},drawElements:{0:!0,2:!0},createShader:{0:!0},getShaderParameter:{1:!0},getProgramParameter:{1:!0},getVertexAttrib:{1:!0},vertexAttribPointer:{2:!0},bindTexture:{0:!0},activeTexture:{0:!0},getTexParameter:{0:!0,1:!0},texParameterf:{0:!0,1:!0},texParameteri:{0:!0,1:!0,2:!0},texImage2D:{0:!0,2:!0,6:!0,7:!0},texSubImage2D:{0:!0,6:!0,7:!0},copyTexImage2D:{0:!0,2:!0},copyTexSubImage2D:{0:!0},generateMipmap:{0:!0},bindBuffer:{0:!0},bufferData:{0:!0,2:!0},bufferSubData:{0:!0},getBufferParameter:{0:!0,1:!0},pixelStorei:{0:!0,1:!0},readPixels:{4:!0,5:!0},bindRenderbuffer:{0:!0},bindFramebuffer:{0:!0},checkFramebufferStatus:{0:!0},framebufferRenderbuffer:{0:!0,1:!0,2:!0},framebufferTexture2D:{0:!0,1:!0,2:!0},getFramebufferAttachmentParameter:{0:!0,1:!0,2:!0},getRenderbufferParameter:{0:!0,1:!0},renderbufferStorage:{0:!0,1:!0},clear:{0:!0},depthFunc:{0:!0},blendFunc:{0:!0,1:!0},blendFuncSeparate:{0:!0,1:!0,2:!0,3:!0},blendEquation:{0:!0},blendEquationSeparate:{0:!0,1:!0},stencilFunc:{0:!0},stencilFuncSeparate:{0:!0,1:!0},stencilMaskSeparate:{0:!0},stencilOp:{0:!0,1:!0,2:!0},stencilOpSeparate:{0:!0,1:!0,2:!0,3:!0},cullFace:{0:!0},frontFace:{0:!0}},F=null;function S(e){if(F==null){F={};for(var t in e)typeof e[t]=="number"&&(F[e[t]]=t)}}function _(){if(F==null)throw"WebGLDebugUtils.init(ctx) not called"}function U(e){return _(),F[e]!==void 0}function v(e){_();var t=F[e];return t!==void 0?t:"*UNKNOWN WebGL ENUM (0x"+e.toString(16)+")"}function A(e,t,f){var n=p[e];return n!==void 0&&n[t]?v(f):f.toString()}function I(e,t){S(e),t=t||function(a,g,i){for(var d="",m=0;m<i.length;++m)d+=(m==0?"":", ")+A(g,m,i[m]);O("WebGL error "+v(a)+" in "+g+"("+d+")")};var f={};function n(a,g){return function(){var i=a[g].apply(a,arguments),d=a.getError();return d!=0&&(f[d]=!0,t(d,g,arguments)),i}}var l={};for(var s in e)typeof e[s]=="function"?l[s]=n(e,s):l[s]=e[s];return l.getError=function(){for(var a in f)if(f[a])return f[a]=!1,a;return e.NO_ERROR},l}function L(e){var t=e.getParameter(e.MAX_VERTEX_ATTRIBS),f=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,f);for(var n=0;n<t;++n)e.disableVertexAttribArray(n),e.vertexAttribPointer(n,4,e.FLOAT,!1,0,0),e.vertexAttrib1f(n,0);e.deleteBuffer(f);for(var l=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),n=0;n<l;++n)e.activeTexture(e.TEXTURE0+n),e.bindTexture(e.TEXTURE_CUBE_MAP,null),e.bindTexture(e.TEXTURE_2D,null);for(e.activeTexture(e.TEXTURE0),e.useProgram(null),e.bindBuffer(e.ARRAY_BUFFER,null),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.bindRenderbuffer(e.RENDERBUFFER,null),e.disable(e.BLEND),e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.DITHER),e.disable(e.SCISSOR_TEST),e.blendColor(0,0,0,0),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ZERO),e.clearColor(0,0,0,0),e.clearDepth(1),e.clearStencil(-1),e.colorMask(!0,!0,!0,!0),e.cullFace(e.BACK),e.depthFunc(e.LESS),e.depthMask(!0),e.depthRange(0,1),e.frontFace(e.CCW),e.hint(e.GENERATE_MIPMAP_HINT,e.DONT_CARE),e.lineWidth(1),e.pixelStorei(e.PACK_ALIGNMENT,4),e.pixelStorei(e.UNPACK_ALIGNMENT,4),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),e.UNPACK_COLORSPACE_CONVERSION_WEBGL&&e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.BROWSER_DEFAULT_WEBGL),e.polygonOffset(0,0),e.sampleCoverage(1,!1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.stencilFunc(e.ALWAYS,0,4294967295),e.stencilMask(4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.viewport(0,0,e.canvas.clientWidth,e.canvas.clientHeight),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT|e.STENCIL_BUFFER_BIT);e.getError(););}function W(e){var t={},f=1,n=!1,l=[],s=void 0,a=void 0,g=void 0,i={};function d(r){return r instanceof WebGLBuffer||r instanceof WebGLFramebuffer||r instanceof WebGLProgram||r instanceof WebGLRenderbuffer||r instanceof WebGLShader||r instanceof WebGLTexture}function m(r){for(var u=0;u<r.length;++u){var E=r[u];if(d(E))return E.__webglDebugContextLostId__==f}return!0}function D(){for(var r=Object.keys(i),u=0;u<r.length;++u)delete glErrorShdow_[r]}function w(r,u){var E=r[u];return function(){if(!n){if(!m(arguments)){i[r.INVALID_OPERATION]=!0;return}var N=E.apply(r,arguments);return N}}}for(var T in e)typeof e[T]=="function"?t[T]=w(e,T):t[T]=e[T];function h(r){return{statusMessage:r}}function G(){for(var r=0;r<l.length;++r){var u=l[r];u instanceof WebGLBuffer?e.deleteBuffer(u):u instanceof WebctxFramebuffer?e.deleteFramebuffer(u):u instanceof WebctxProgram?e.deleteProgram(u):u instanceof WebctxRenderbuffer?e.deleteRenderbuffer(u):u instanceof WebctxShader?e.deleteShader(u):u instanceof WebctxTexture&&e.deleteTexture(u)}}t.loseContext=function(){if(!n){for(n=!0,++f;e.getError(););D(),i[e.CONTEXT_LOST_WEBGL]=!0,setTimeout(function(){s&&s(h("context lost"))},0)}},t.restoreContext=function(){if(n)if(a)setTimeout(function(){if(G(),L(e),n=!1,a){var r=a;a=g,g=void 0,r(h("context restored"))}},0);else throw"You can not restore the context without a listener"},t.getError=function(){if(!n)for(var r;r=e.getError();)i[r]=!0;for(var r in i)if(i[r])return delete i[r],r;return e.NO_ERROR};for(var P=["createBuffer","createFramebuffer","createProgram","createRenderbuffer","createShader","createTexture"],o=0;o<P.length;++o){var b=P[o];t[b]=function(r){return function(){if(n)return null;var u=r.apply(e,arguments);return u.__webglDebugContextLostId__=f,l.push(u),u}}(e[b])}for(var C=["getActiveAttrib","getActiveUniform","getBufferParameter","getContextAttributes","getAttachedShaders","getFramebufferAttachmentParameter","getParameter","getProgramParameter","getProgramInfoLog","getRenderbufferParameter","getShaderParameter","getShaderInfoLog","getShaderSource","getTexParameter","getUniform","getUniformLocation","getVertexAttrib"],o=0;o<C.length;++o){var b=C[o];t[b]=function(E){return function(){return n?null:E.apply(e,arguments)}}(t[b])}for(var B=["isBuffer","isEnabled","isFramebuffer","isProgram","isRenderbuffer","isShader","isTexture"],o=0;o<B.length;++o){var b=B[o];t[b]=function(E){return function(){return n?!1:E.apply(e,arguments)}}(t[b])}t.checkFramebufferStatus=function(r){return function(){return n?e.FRAMEBUFFER_UNSUPPORTED:r.apply(e,arguments)}}(t.checkFramebufferStatus),t.getAttribLocation=function(r){return function(){return n?-1:r.apply(e,arguments)}}(t.getAttribLocation),t.getVertexAttribOffset=function(r){return function(){return n?0:r.apply(e,arguments)}}(t.getVertexAttribOffset),t.isContextLost=function(){return n};function R(r){return typeof r=="function"?r:function(u){r.handleEvent(u)}}return t.registerOnContextLostListener=function(r){s=R(r)},t.registerOnContextRestoredListener=function(r){n?g=R(r):a=R(r)},t}return{init:S,mightBeEnum:U,glEnumToString:v,glFunctionArgToString:A,makeDebugContext:I,makeLostContextSimulatingContext:W,resetToInitialState:L}}();
