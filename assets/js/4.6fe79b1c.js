(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{120:function(t,e,n){},222:function(t,e,n){var i=n(31);i(i.P,"Function",{bind:n(223)})},223:function(t,e,n){"use strict";var i=n(33),r=n(3),o=n(224),a=[].slice,s={},c=function(t,e,n){if(!(e in s)){for(var i=[],r=0;r<e;r++)i[r]="a["+r+"]";s[e]=Function("F,a","return new F("+i.join(",")+")")}return s[e](t,n)};t.exports=Function.bind||function(t){var e=i(this),n=a.call(arguments,1),s=function(){var i=n.concat(a.call(arguments));return this instanceof s?c(e,i.length,i):o(e,i,t)};return r(e.prototype)&&(s.prototype=e.prototype),s}},224:function(t,e){t.exports=function(t,e,n){var i=void 0===n;switch(e.length){case 0:return i?t():t.call(n);case 1:return i?t(e[0]):t.call(n,e[0]);case 2:return i?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return i?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return i?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},225:function(t,e,n){t.exports=n(226)},226:function(t,e,n){n(227);var i=n(59).Object;t.exports=function(t,e,n){return i.defineProperty(t,e,n)}},227:function(t,e,n){var i=n(74);i(i.S+i.F*!n(60),"Object",{defineProperty:n(64).f})},228:function(t,e,n){"use strict";var i=n(120);n.n(i).a},245:function(t,e,n){"use strict";n.r(e);n(222);var i=n(225),r=n.n(i);function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(t,i.key,i)}}var a=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),document.createElement("canvas").getContext?(this.state={dom:e,context:e.getContext("2d"),options:{marginRate:.1,textRate:.1,contentRate:{x:.9,y:.75}},timer:""},this.state.options.y=n.y,this.init()):console.log("您的浏览器不支持canvas")}var e,n,i;return e=t,(n=[{key:"init",value:function(){if(this.bindEvent(),document.createEvent){var t=document.createEvent("HTMLEvents");t.initEvent("resize",!0,!0),window.dispatchEvent(t)}else document.createEventObject&&window.fireEvent("onresize");document.getElementById("chart").style.display="block"}},{key:"bindEvent",value:function(){var t=this,e=this.state,n=e.dom;window.onresize=function(){var i=n.parentElement.clientWidth;t.state.dom.onmousemove=null,e.width=parseInt(i),e.dom.setAttribute("width",e.width),i>800?(e.dom.setAttribute("height",400),e.height=400):(e.dom.setAttribute("height",.5*i),e.height=parseInt(.5*i)),e.dom.style.transform="scale(1,-1)",e.Origin_x=parseInt(e.width*(e.options.marginRate+e.options.textRate)),e.Origin_y=parseInt(e.height*e.options.marginRate),e.Origin_width=parseInt(e.width*e.options.contentRate.x),e.Origin_height=parseInt(e.height*e.options.contentRate.y),t.state.maxVal=800*Math.ceil(t.utils().max(t.state.options.y)/800),t.state.options.process_y=t.utils().formData(t.state,t.state.options.y),window.clearTimeout(t.state.timer),t.state.index=0,t.drawGrid(),t.draw()}}},{key:"mouseMove",value:function(){this.state.context,this.state.imageData=this.state.context.getImageData(0,0,this.state.width,this.state.height),this.state.dom.onmousemove=this.saveImageData.bind(this)}},{key:"saveImageData",value:function(t){var e=this.state.dom.getBoundingClientRect(),n=this.state.context,i=parseInt(t.clientX-e.left)-this.state.Origin_x,r=this.state.height-parseInt(t.clientY-e.top)-this.state.Origin_y;if(i<0||i>this.state.Origin_width-this.state.Origin_x||r<0||r>this.state.Origin_height)return n.putImageData(this.state.imageData,0,0),!1;n.putImageData(this.state.imageData,0,0),n.save(),n.lineWidth=.5,n.strokeStyle="#666666",n.beginPath();var o=(i/this.state.x_step).toFixed(0);if(o>this.state.options.process_y.length-1)return!1;n.fillStyle="rgba(0,0,0,.5)",n.fillRect(parseInt(t.clientX-e.left)+20,r+20,90,30),n.font="10pt Arial",n.fillStyle="rgb(255,255,255)";var a=this.state.options.process_y[o].x+"/"+this.state.options.y[o];n.measureText(a).width,n.scale(1,-1),n.fillText(a,parseInt(t.clientX-e.left)+40,-(r+30)),n.setTransform(1,0,0,1,0,0),n.moveTo(this.state.options.process_y[o].x+.5,this.state.Origin_y),n.lineTo(this.state.options.process_y[o].x+.5,this.state.Origin_y+this.state.Origin_height),n.stroke(),n.restore()}},{key:"utils",value:function(){return{max:function(t){if(0==t.length)throw"数据错误";for(var e=t[0],n=1;n<t.length;n++)e<t[n+1]&&(e=t[n+1]);return e},formData:function(t,e){var n=[];t.x_step=(t.Origin_width-t.Origin_x)/e.length;for(var i=0;i<e.length;i++){var r={};r.x=parseInt(t.x_step*i+t.Origin_x),r.y=parseInt((e[i]/t.maxVal).toFixed(2)*t.Origin_height+t.Origin_y),n.push(r)}return n}}}},{key:"drawGrid",value:function(){var t=this.state,e=t.context,n=t.maxVal/8;t.y_step=parseInt(t.Origin_height/800*100);var i="",r="";e.strokeStyle="#666666",e.lineWidth=.5,e.fillStyle="#666666";var o=t.dom.parentElement.clientWidth/800;o>1?(e.font="11pt Arial",r=50):(e.font=11*o+"pt Arial",r=50*o);for(var a=0;a<9;a++)e.beginPath(),0===a?(e.moveTo(t.Origin_x,t.Origin_y+t.y_step*a-.5),e.lineTo(t.Origin_width,t.Origin_y+t.y_step*a-.5),e.stroke()):this.drawDashedLine(e,t.Origin_x,t.Origin_y+t.y_step*a-.5,t.Origin_width,t.Origin_y+t.y_step*a-.5,3),e.save(),e.scale(1,-1),i=e.measureText(n*a).width,e.fillText(n*a+" gps",t.Origin_x-i-r,-(t.Origin_y+t.y_step*a-2.5)),e.setTransform(1,0,0,1,0,0),e.restore()}},{key:"drawDashedLine",value:function(t,e,n,i,r,o){o=void 0===o?5:o;for(var a=i-e,s=r-n,c=Math.floor(Math.sqrt(a*a+s*s)/o),u=0;u<c;++u)t[u%2==0?"moveTo":"lineTo"](e+a/c*u,n+s/c*u);t.stroke()}},{key:"draw",value:function(){var t=this.state,e=this.state.context;e.save(),e.fillStyle="red",t.options.process_y,e.lineWidth=1,e.strokeStyle="#de8666",this.pointer()}},{key:"getCtrlPoint",value:function(t,e,n,i){if(n&&i||(n=.2,i=.2),e<1)var r=t[0].x+(t[1].x-t[0].x)*n,o=t[0].y+(t[1].y-t[0].y)*n;else r=t[e].x+(t[e+1].x-t[e-1].x)*n,o=t[e].y+(t[e+1].y-t[e-1].y)*n;if(e>t.length-3)var a=t.length-1,s=t[a].x-(t[a].x-t[a-1].x)*i,c=t[a].y-(t[a].y-t[a-1].y)*i;else s=t[e+1].x-(t[e+2].x-t[e].x)*i,c=t[e+1].y-(t[e+2].y-t[e].y)*i;return{pA:{x:r,y:o},pB:{x:s,y:c}}}},{key:"handler",value:function(){var t=this,e=this,n=this.state,i=n.options.process_y;return new Promise((function(r,o){n.timer=window.setTimeout((function(){if(t.state.index>t.state.options.process_y.length-2)return o(),!1;t.state.index++,r(),n.context.beginPath(),n.context.moveTo(i[n.index-1].x,i[n.index-1].y);var a=e.getCtrlPoint(i,n.index-1);n.context.bezierCurveTo(a.pA.x,a.pA.y,a.pB.x,a.pB.y,i[n.index].x,i[n.index].y),n.context.stroke(),window.clearTimeout(n.timer)}),1*n.index)}))}},{key:"pointer",value:function(){var t=this;this.handler().then((function(){t.pointer()}),(function(){t.mouseMove(),console.log("绘制完成")}))}}])&&o(e.prototype,n),i&&o(e,i),t}(),s={data:function(){return{chart:""}},mounted:function(){var t=document.getElementById("chart");this.chart=new a(t,{x:[1,2,3,4,5,6,7],y:[60.12,123,123,1064,800,790,300,740,350,650,190,420,340,250,450,240,320,200,100,132,454,621,500,132,454,121]})}},c=(n(228),n(0)),u=Object(c.a)(s,(function(){var t=this.$createElement;this._self._c;return this._m(0)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"box"}},[e("canvas",{attrs:{id:"chart"}})])}],!1,null,null,null);e.default=u.exports},58:function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},59:function(t,e){var n=t.exports={version:"2.6.9"};"number"==typeof __e&&(__e=n)},60:function(t,e,n){t.exports=!n(75)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},63:function(t,e,n){var i=n(64),r=n(76);t.exports=n(60)?function(t,e,n){return i.f(t,e,r(1,n))}:function(t,e,n){return t[e]=n,t}},64:function(t,e,n){var i=n(67),r=n(96),o=n(97),a=Object.defineProperty;e.f=n(60)?Object.defineProperty:function(t,e,n){if(i(t),e=o(e,!0),i(n),r)try{return a(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},65:function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},67:function(t,e,n){var i=n(65);t.exports=function(t){if(!i(t))throw TypeError(t+" is not an object!");return t}},68:function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},74:function(t,e,n){var i=n(58),r=n(59),o=n(80),a=n(63),s=n(68),c=function(t,e,n){var u,f,l,h=t&c.F,p=t&c.G,y=t&c.S,v=t&c.P,d=t&c.B,x=t&c.W,g=p?r:r[e]||(r[e]={}),m=g.prototype,w=p?i:y?i[e]:(i[e]||{}).prototype;for(u in p&&(n=e),n)(f=!h&&w&&void 0!==w[u])&&s(g,u)||(l=f?w[u]:n[u],g[u]=p&&"function"!=typeof w[u]?n[u]:d&&f?o(l,i):x&&w[u]==l?function(t){var e=function(e,n,i){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,i)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(l):v&&"function"==typeof l?o(Function.call,l):l,v&&((g.virtual||(g.virtual={}))[u]=l,t&c.R&&m&&!m[u]&&a(m,u,l)))};c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,t.exports=c},75:function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},76:function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},80:function(t,e,n){var i=n(95);t.exports=function(t,e,n){if(i(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,r){return t.call(e,n,i,r)}}return function(){return t.apply(e,arguments)}}},81:function(t,e,n){var i=n(65),r=n(58).document,o=i(r)&&i(r.createElement);t.exports=function(t){return o?r.createElement(t):{}}},95:function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},96:function(t,e,n){t.exports=!n(60)&&!n(75)((function(){return 7!=Object.defineProperty(n(81)("div"),"a",{get:function(){return 7}}).a}))},97:function(t,e,n){var i=n(65);t.exports=function(t,e){if(!i(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!i(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}}}]);